<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Examen 2</title>
<link rel="stylesheet" href="styles.css">

<style>
.question {
  margin-bottom: 25px;
}

.code {
  background: #f4f4f4;
  padding: 10px;
  border-radius: 6px;
  font-family: monospace;
  white-space: pre-wrap;
}

.answers label {
  display: block;
  margin: 5px 0;
}

.correct {
  color: green;
  font-weight: bold;
}

.incorrect {
  color: red;
  font-weight: bold;
}

.explanation {
  display: none;
  margin-top: 8px;
  font-style: italic;
}
</style>
</head>

<body>

<h2>Examen 2 (Preguntas 11–20)</h2>

<div id="exam"></div>

<div class="buttons">
  <button onclick="gradeExam()">Calificar</button>
  <span id="result"></span>
  <br><br>
  <button onclick="resetExam()">Reiniciar</button>
  <button onclick="goBack()">Atrás</button>
</div>

<script>
const questions = [
  {
    text: `What will be the value of variable 'a' after executing the following code?

a = [1,2,3]
a[-3:-1] = 10,20,30,40`,
    options: [
      "TypeError",
      "[10,20,30,40,2,3]",
      "[10,20,30,40,3]",
      "IndexError",
      "[10,20,30,40]"
    ],
    correct: [2],
    explanation: "El slicing reemplaza [-3:-1]; el último 3 queda intacto."
  },
  {
    text: "What basic types of objects are immutable?",
    options: ["Numbers","Tuples","Dictionaries","Strings","Lists"],
    correct: [0,1,3],
    explanation: "Numbers, tuples y strings son inmutables."
  },
  {
    text: `What will be the result of this program?

class X:
   __data__ = ("x","y" "z")
   __slots__ = ("a", "b","c")
   def __init__(self, A): 
    self.d = A
   def __str__(self): 
    print(A*3)
try:
   x = X(2) 
   print(x)
except:
   print('Ups')`,
    options: [
      "AttributeError type error",
      "6",
      "None",
      "Ups"
    ],
    correct: [3],
    explanation: "__slots__ impide crear nuevos atributos."
  },
  {
    text: `What will be the output?

def dbl(self,x):
    return x*2

class C:
    f = dbl

obj = C()
print(obj.f(1))`,
    options: [
      "an error will occur because f takes 2 parameters",
      "nothing will be printed",
      "2",
      "0"
    ],
    correct: [2],
    explanation: "self se pasa automáticamente."
  },
  {
    text: `What will be the output of the following code execution?
    class Y:
    def __init__(self,one "aaa", two):
          self.one = one
          self.two = two
    y = Y("bbb")
    print y.one
    print y.two`,
    options: [
      "the code will not print anything",
      "aaa",
      "an error occurs",
      "bbb aaa",
      "bbb"
    ],
    correct: [2],
    explanation: "Errores de sintaxis."
  },
  {
    text: `What will be the value of variable 'x'?

x = y = 1`,
    options: ["1","0","x will not be initialized"],
    correct: [0],
    explanation: "Asignación múltiple."
  },
  {
    text: `What will be the value of list 'arr'?

arr = [1,2]
for a in arr[:]:
    arr.insert(0,3)`,
    options: [
      "[3,3,1,2]",
      "[3,3,3,1,2]",
      "[1,2,3,3]",
      "IndexError",
      "[3,1,2,3]"
    ],
    correct: [0],
    explanation: "El for itera sobre una copia."
  },
  {
    text: ` What will be the output of the following code execution?

value = 0
if value > 0:
    print(">0")
elif:
    print("<=0")`,
    options: [
      "the code will not print anything",
      "a syntax error will occur",
      "<=0",
      ">0"
    ],
    correct: [1],
    explanation: "elif necesita condición."
  },
  {
    text: "What type of data is ('',)?",
    options: ["tuple","syntax error","string","unicode"],
    correct: [0],
    explanation: "La coma define una tupla."
  },
  {
    text: `What will be the output?

word = 'foobar'
print(word[3:] + word[:3])`,
    options: [
      "foobar",
      "foo bar",
      "bar foo",
      "barfoo",
      "an error occurs"
    ],
    correct: [3],
    explanation: "'bar' + 'foo'."
  }
];

const examDiv = document.getElementById("exam");

questions.forEach((q, i) => {
  const div = document.createElement("div");
  div.className = "question";

  div.innerHTML = `
    <b>${i + 11}.</b>
    <pre class="code">${q.text}</pre>
  `;

  const ansDiv = document.createElement("div");
  ansDiv.className = "answers";

  q.options.forEach((opt, j) => {
    ansDiv.innerHTML += `
      <label>
        <input type="checkbox" name="q${i}" value="${j}">
        ${opt}
      </label>
    `;
  });

  div.appendChild(ansDiv);

  const exp = document.createElement("div");
  exp.className = "explanation";
  exp.textContent = q.explanation;
  div.appendChild(exp);

  examDiv.appendChild(div);
});

function gradeExam() {
  let c = 0, w = 0;

  questions.forEach((q, i) => {
    const checks = document.querySelectorAll(`input[name="q${i}"]`);
    const sel = [...checks].filter(x => x.checked).map(x => +x.value);

    checks.forEach((cbox, idx) => {
      cbox.parentElement.classList.remove("correct","incorrect");
      if (q.correct.includes(idx)) cbox.parentElement.classList.add("correct");
      else if (cbox.checked) cbox.parentElement.classList.add("incorrect");
    });

    if (JSON.stringify(sel.sort()) === JSON.stringify(q.correct.slice().sort())) c++;
    else w++;

    document.querySelectorAll(".explanation")[i].style.display = "block";
  });

  document.getElementById("result").textContent =
    `Correctas: ${c} | Incorrectas: ${w}`;
}

function resetExam() {
  document.querySelectorAll("input").forEach(i => i.checked = false);
  document.querySelectorAll("label").forEach(l => l.classList.remove("correct","incorrect"));
  document.querySelectorAll(".explanation").forEach(e => e.style.display = "none");
  document.getElementById("result").textContent = "";
}

function goBack() {
  window.location.href = "index.html";
}
</script>

</body>
</html>
